<!DOCTYPE html>
<html lang="zh-CN" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>ч╗ИхобхЖ│чнЦ ┬╖ ф╕╗ч╝Цх╖еф╜ЬхП░</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
</head>
<body class="bg-light">

<nav class="navbar navbar-expand-lg navbar-dark bg-dark mb-4">
  <div class="container">
    <a class="navbar-brand" href="/chiefeditor">ф╕╗ч╝Цх╖еф╜ЬхП░</a>
    <span class="navbar-text text-white">ч╗ИхобхЖ│чнЦф╕нх┐Г</span>
  </div>
</nav>

<div class="container bg-white p-4 rounded shadow-sm">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h4 class="mb-0"><i class="bi bi-gavel"></i> х╛Еч╗Ихобчи┐ф╗╢хИЧшби</h4>
    <span class="badge bg-primary" th:text="${#lists.size(manuscripts)} + ' чпЗх╛ЕхдДчРЖ'">0 чпЗх╛ЕхдДчРЖ</span>
  </div>

  <div th:if="${#lists.isEmpty(manuscripts)}" class="text-center py-5 text-muted">
    <i class="bi bi-check2-circle fs-1"></i>
    <p class="mt-2">х╜УхЙНц▓бцЬЙщЬАшжБч╗ИхобчЪДчи┐ф╗╢уАВ</p>
  </div>

  <div th:unless="${#lists.isEmpty(manuscripts)}" class="table-responsive">
    <table class="table table-hover align-middle">
      <thead class="table-light">
      <tr>
        <th style="width: 5%">ID</th>
        <th style="width: 25%">чи┐ф╗╢ф┐бцБп</th>
        <th style="width: 15%">ч╝Цш╛Сх╗║шоо</th>
        <th style="width: 15%">ч╝Цш╛СшпДшпн</th>
        <th style="width: 40%">ч╗ИхобцУНф╜Ь</th>
      </tr>
      </thead>
      <tbody>
      <tr th:each="m : ${manuscripts}">
        <td class="fw-bold text-secondary" th:text="${'#' + m.manuscriptId}">#101</td>

        <td>
          <div class="fw-bold" th:text="${m.title}">чи┐ф╗╢цаЗщвШ</div>
          <small class="text-muted">цПРф║дцЧ╢щЧ┤: <span th:text="${#temporals.format(m.submitTime, 'yyyy-MM-dd')}">2023-01-01</span></small>
        </td>

        <td>
          <span th:switch="${m.editorRecommendation}">
            <span th:case="'ACCEPT'" class="badge bg-success">х╗║шоох╜ХчФи</span>
            <span th:case="'REJECT'" class="badge bg-danger">х╗║шооцЛТчи┐</span>
            <span th:case="'MINOR_REVISION'" class="badge bg-warning text-dark">х╗║шоох░Пф┐о</span>
            <span th:case="'MAJOR_REVISION'" class="badge bg-warning text-dark">х╗║шоохдзф┐о</span>
            <span th:case="*" class="badge bg-secondary" th:text="${m.editorRecommendation ?: 'цЧах╗║шоо'}">цЬкчЯе</span>
          </span>
        </td>

        <td>
          <button type="button" class="btn btn-sm btn-outline-info"
                  data-bs-toggle="popover" title="ч╝Цш╛СшпДшпн"
                  th:data-bs-content="${m.editorComment ?: 'цЧашпжч╗ЖшпДшпн'}">
            цЯечЬЛшпДшпн
          </button>
        </td>

        <td>
          <form th:action="@{/chiefeditor/decisions/do}" method="post" onsubmit="return confirm('чбохоЪцПРф║дцндч╗ИхобхЖ│хоЪхРЧя╝Я');">
            <input type="hidden" name="manuscriptId" th:value="${m.manuscriptId}">

            <div class="input-group input-group-sm">
              <select class="form-select" name="decision" required style="max-width: 120px;">
                <option value="" disabled selected>щАЙцЛйхЖ│хоЪ...</option>
                <option value="Accepted" class="text-success fw-bold">тЬЕ х╜ХчФи</option>
                <option value="Need Revision" class="text-warning fw-bold">ЁЯФД щААф┐о</option>
                <option value="Rejected" class="text-danger fw-bold">тЭМ цЛТчи┐</option>
              </select>

              <input type="text" class="form-control" name="comment" placeholder="ч╗Щф╜ЬшАЕчЪДч╗ИхобцДПшзБ (х┐Ехбл)" required>

              <button class="btn btn-primary" type="submit">цПРф║д</button>
            </div>
          </form>
        </td>
      </tr>
      </tbody>
    </table>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
  // хИЭхзЛхМЦ Bootstrap Popover (чФиф║ОцШ╛чд║ч╝Цш╛СшпДшпн)
  var popoverTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="popover"]'))
  var popoverList = popoverTriggerList.map(function (popoverTriggerEl) {
    return new bootstrap.Popover(popoverTriggerEl)
  })
</script>
</body>
</html>